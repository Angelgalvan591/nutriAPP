{% extends "base.html" %}
{% block content %}

<h1 class="text-uppercase text-center" style="font-family: 'Jersey 20', sans-serif; color: #1e1a15;">
  ðŸ¦¦ Bienvenido a NutriApp ðŸ¦¦
</h1>

<div class="container my-4 font-monospace">
  <div class="row g-3">

    <!-- Columna izquierda -->
    <div class="col-md-3">

      <div class="card mb-3 shadow border border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #846b51; font-family: 'Jersey 20', sans-serif;">
          Â¿Con quÃ© funciones cuenta NutriApp?
        </div>
        <div class="card-body">
          <p>NutriApp te ofrece las siguientes funciones:</p>
          <ul>
            <li>Contador de calorÃ­as</li>
            <li>Calculadora de gasto energÃ©tico</li>
            <li>Recetas saludables</li>
            <li>ArtÃ­culos informativos</li>
            <li>Lienzo interactivo para crear arte</li>
          </ul>
        </div>
      </div>

      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #846b51; font-family: 'Jersey 20', sans-serif;">
          Nuestro plan de recetas
        </div>
        <div class="card-body">
          <p>Estamos trabajando para ampliar nuestra base de datos de recetas saludables. Ya seas nuevo cocinando o un chef experto, encontrarÃ¡s una variedad nutritiva para todos los niveles.</p>
        </div>
      </div>

      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #846b51; font-family: 'Jersey 20', sans-serif;">
          Analizador de Recetas Personalizadas
        </div>
        <div class="card-body">
          <p>Â¿Tienes una receta favorita que te gustarÃ­a evaluar? Ingresa tus ingredientes y te diremos el valor nutricional.</p>
          <p>Â¡Prueba el Analizador de Recetas hoy!</p>
          <div class="d-grid gap-2">
            <a href="{{ url_for('analizador') }}" class="btn btn-sm btn-outline-dark text-uppercase" style="font-family: 'Jersey 20', sans-serif;">
              Ir al Analizador de Recetas
            </a>
          </div>
        </div>
      </div>

    </div> <!-- Columna izquierda -->

    <!-- Columna central -->
    <div class="col-md-6">

      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #bc9c7b; font-family: 'Jersey 20', sans-serif;">
          Â¿QuÃ© es NutriApp?
        </div>
        <div class="card-body">
          <p>
            NutriApp busca ser una alternativa gratuita a las apps nutricionales de pago. 
            PodrÃ¡s llevar el control de tus calorÃ­as, conocer tu gasto energÃ©tico diario, ver recetas saludables y divertirte dibujando en un lienzo interactivo.
          </p>
          <p>Todo sin costo. Creemos que la salud debe ser accesible para todos.</p>
        </div>
      </div>

      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #bc9c7b; font-family: 'Jersey 20', sans-serif;">
          Arte de los Usuarios
        </div>
        <div class="card-body text-center">
          <p>Â¡Crea tu propio arte! Usa el lienzo para dibujar lo que quieras ðŸ¦¦</p>

          <canvas id="dibujo" width="400" height="300" style="border: 2px solid #000; background-color:white; cursor:crosshair;"></canvas>

          <div class="mt-3 d-flex justify-content-center gap-2">
            <button class="btn btn-sm btn-outline-dark" id="limpiarBtn">Limpiar</button>
            <button class="btn btn-sm btn-outline-dark" id="guardarBtn">Guardar</button>
          </div>
        </div>
      </div>

    </div> <!-- Columna central -->

    <!-- Columna derecha -->
    <div class="col-md-3">

      {% if usuario_sesion %}
      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #846b51; font-family: 'Jersey 20', sans-serif;">
          Â¡Bienvenido, {{ usuario_sesion.nombre }}!
        </div>
        <div class="card-body">
          <p class="mb-2">Nos alegra verte de nuevo ðŸ˜Š</p>
          <p>Explora tus recetas, revisa tu progreso o consulta tu perfil.</p>
          <a href="{{ url_for('perfil') }}" class="btn btn-sm btn-outline-success text-uppercase" style="font-family: 'Jersey 20', sans-serif;">
            Ir a mi perfil
          </a>
        </div>
      </div>

      {% else %}
      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #846b51; font-family: 'Jersey 20', sans-serif;">
          Â¿Ya tienes una cuenta?
        </div>
        <div class="card-body">
          <p>Inicia sesiÃ³n para mÃ¡s funciones.</p>
          <div class="d-grid gap-2">
            <a href="{{ url_for('iniciosesion') }}" class="btn btn-sm btn-outline-dark text-uppercase" style="font-family: 'Jersey 20', sans-serif;">
              Iniciar sesiÃ³n
            </a>
            <a href="{{ url_for('crearcuenta') }}" class="btn btn-sm btn-outline-secondary text-uppercase" style="font-family: 'Jersey 20', sans-serif;">
              Registrarse
            </a>
          </div>
        </div>
      </div>
      {% endif %}

      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #846b51; font-family: 'Jersey 20', sans-serif;">
          InformaciÃ³n del usuario
        </div>
        <div class="card-body">
          <p>Tu informaciÃ³n estÃ¡ segura y solo se usa para ayudarte en tus objetivos.</p>
        </div>
      </div>

      <div class="card mb-3 border shadow border-dark rounded-0">
        <div class="card-header text-white text-uppercase" style="background-color: #846b51; font-family: 'Jersey 20', sans-serif;">
          Contacto
        </div>
        <div class="card-body">
          <p>ContÃ¡ctanos por estas redes:</p>
          <ul class="list-unstyled">
            <li><a href="https://www.facebook.com/angel.galvan.37550">Facebook de Angel</a></li>
            <li><a href="https://www.facebook.com/yui.chan.uwu.awuadecanela">Facebook de Judith</a></li>
            <li><a href="https://www.instagram.com/justt_ang17/">Instagram de Angel</a></li>
            <li><a href="https://www.instagram.com/dann._.zpt/">Instagram de Judith</a></li>
          </ul>
        </div>
      </div>

    </div> <!-- Columna derecha -->

  </div> <!-- row -->
</div> <!-- container -->


<script>
  const canvas = document.getElementById("dibujo");
  const ctx = canvas.getContext("2d");
  let dibujando = false;

  canvas.addEventListener("mousedown", e => {
    dibujando = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
  });

  canvas.addEventListener("mousemove", e => {
    if (dibujando) {
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.strokeStyle = "black";
      ctx.lineWidth = 2;
      ctx.lineCap = "round";
      ctx.stroke();
    }
  });

  canvas.addEventListener("mouseup", () => dibujando = false);
  canvas.addEventListener("mouseleave", () => dibujando = false);

  document.getElementById("limpiarBtn").addEventListener("click", () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });

  document.getElementById("guardarBtn").addEventListener("click", () => {
    const enlace = document.createElement("a");
    enlace.download = "mi_dibujo.jpg";
    enlace.href = canvas.toDataURL();
    enlace.click();
  });
</script>

{% endblock %}
